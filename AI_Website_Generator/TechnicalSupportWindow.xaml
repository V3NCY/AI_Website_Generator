<Window x:Class="AI_Website_Generator.TechnicalSupportWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Tech Team Workspace"
        Height="650" Width="1150"
        WindowStartupLocation="CenterScreen"
        Background="#EEF2F5">

    <!-- Light theme like your other screens (white card, soft borders, blue primary) -->

    <Window.Resources>

        <!-- ===== Palette (matches screenshot vibe) ===== -->
        <Color x:Key="AppBg">#EEF2F5</Color>
        <Color x:Key="Card">#FFFFFF</Color>
        <Color x:Key="Card2">#F7F9FB</Color>
        <Color x:Key="Line">#D6DEE6</Color>

        <Color x:Key="Text">#1F2A37</Color>
        <Color x:Key="Muted">#607086</Color>

        <Color x:Key="Primary">#2D8CDB</Color>
        <!-- blue button like "Обнови" -->
        <Color x:Key="PrimaryDark">#2278C0</Color>
        <Color x:Key="SoftBlue">#E8F2FB</Color>

        <Color x:Key="Purple">#B455D4</Color>
        <!-- status pill "За дизайнер" vibe -->
        <Color x:Key="SoftPurple">#F3E6FB</Color>

        <Color x:Key="Green">#2EAF66</Color>
        <Color x:Key="SoftGreen">#E8F7EF</Color>

        <Color x:Key="Amber">#F2B24A</Color>
        <Color x:Key="SoftAmber">#FFF3DB</Color>

        <SolidColorBrush x:Key="AppBgBrush" Color="{StaticResource AppBg}"/>
        <SolidColorBrush x:Key="CardBrush" Color="{StaticResource Card}"/>
        <SolidColorBrush x:Key="Card2Brush" Color="{StaticResource Card2}"/>
        <SolidColorBrush x:Key="LineBrush" Color="{StaticResource Line}"/>
        <SolidColorBrush x:Key="TextBrush" Color="{StaticResource Text}"/>
        <SolidColorBrush x:Key="MutedBrush" Color="{StaticResource Muted}"/>

        <SolidColorBrush x:Key="PrimaryBrush" Color="{StaticResource Primary}"/>
        <SolidColorBrush x:Key="PrimaryDarkBrush" Color="{StaticResource PrimaryDark}"/>
        <SolidColorBrush x:Key="SoftBlueBrush" Color="{StaticResource SoftBlue}"/>

        <SolidColorBrush x:Key="PurpleBrush" Color="{StaticResource Purple}"/>
        <SolidColorBrush x:Key="SoftPurpleBrush" Color="{StaticResource SoftPurple}"/>

        <SolidColorBrush x:Key="GreenBrush" Color="{StaticResource Green}"/>
        <SolidColorBrush x:Key="SoftGreenBrush" Color="{StaticResource SoftGreen}"/>

        <SolidColorBrush x:Key="AmberBrush" Color="{StaticResource Amber}"/>
        <SolidColorBrush x:Key="SoftAmberBrush" Color="{StaticResource SoftAmber}"/>

        <FontFamily x:Key="UiFont">Segoe UI</FontFamily>

        <!-- ===== Text styles ===== -->
        <Style x:Key="TitleText" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="{StaticResource UiFont}"/>
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
        </Style>

        <Style x:Key="SubText" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="{StaticResource UiFont}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="{StaticResource MutedBrush}"/>
        </Style>

        <!-- ===== Card container ===== -->
        <Style x:Key="CardContainer" TargetType="Border">
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Background" Value="{StaticResource CardBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource LineBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="18" ShadowDepth="2" Opacity="0.12"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ===== Buttons ===== -->
        <Style x:Key="BtnBase" TargetType="Button">
            <Setter Property="FontFamily" Value="{StaticResource UiFont}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd"
                                CornerRadius="12"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Opacity" Value="0.92"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="bd" Property="Opacity" Value="0.80"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="bd" Property="Opacity" Value="0.45"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="BtnPrimary" TargetType="Button" BasedOn="{StaticResource BtnBase}">
            <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <Style x:Key="BtnNeutral" TargetType="Button" BasedOn="{StaticResource BtnBase}">
            <Setter Property="Background" Value="#EEF2F5"/>
            <Setter Property="BorderBrush" Value="{StaticResource LineBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
        </Style>

        <Style x:Key="BtnGreen" TargetType="Button" BasedOn="{StaticResource BtnBase}">
            <Setter Property="Background" Value="{StaticResource GreenBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource GreenBrush}"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <Style x:Key="BtnPurple" TargetType="Button" BasedOn="{StaticResource BtnBase}">
            <Setter Property="Background" Value="{StaticResource PurpleBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PurpleBrush}"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <Style x:Key="BtnAmber" TargetType="Button" BasedOn="{StaticResource BtnBase}">
            <Setter Property="Background" Value="{StaticResource AmberBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource AmberBrush}"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <!-- ===== Search / fields ===== -->
        <Style x:Key="Field" TargetType="TextBox">
            <Setter Property="FontFamily" Value="{StaticResource UiFont}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="Background" Value="{StaticResource Card2Brush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource LineBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border CornerRadius="12"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="FieldCombo" TargetType="ComboBox">
            <Setter Property="FontFamily" Value="{StaticResource UiFont}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="Background" Value="{StaticResource Card2Brush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource LineBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,8"/>
        </Style>

        <!-- ===== DataGrid styles (light) ===== -->
        <Style x:Key="GridBase" TargetType="DataGrid">
            <Setter Property="FontFamily" Value="{StaticResource UiFont}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="RowHeight" Value="40"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="GridLinesVisibility" Value="None"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="CanUserResizeRows" Value="False"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="SelectionUnit" Value="FullRow"/>
            <Setter Property="RowBackground" Value="White"/>
            <Setter Property="AlternatingRowBackground" Value="#FAFCFE"/>
        </Style>

        <Style x:Key="GridHeader" TargetType="DataGridColumnHeader">
            <Setter Property="FontFamily" Value="{StaticResource UiFont}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#3C4A5E"/>
            <Setter Property="Background" Value="#F1F5F9"/>
            <Setter Property="BorderBrush" Value="{StaticResource LineBrush}"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
        </Style>

        <Style x:Key="GridRow" TargetType="DataGridRow">
            <Setter Property="BorderBrush" Value="{StaticResource LineBrush}"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#F3F8FE"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#E8F2FB"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="GridCell" TargetType="DataGridCell">
            <Setter Property="Padding" Value="12,0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
        </Style>

        <!-- Priority colors -->
        <Style x:Key="PriorityText" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#54647B"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Priority}" Value="Висок">
                    <Setter Property="Foreground" Value="#C0392B"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Priority}" Value="Среден">
                    <Setter Property="Foreground" Value="#D97706"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Priority}" Value="Нисък">
                    <Setter Property="Foreground" Value="#16A34A"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <!-- Status pill (like screenshot badges) -->
        <Style x:Key="StatusPillBorder" TargetType="Border">
            <Setter Property="CornerRadius" Value="999"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Background" Value="{StaticResource SoftBlueBrush}"/>
            <Setter Property="BorderBrush" Value="#CFE6FB"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Status}" Value="Очаква">
                    <Setter Property="Background" Value="{StaticResource SoftAmberBrush}"/>
                    <Setter Property="BorderBrush" Value="#F7D8A3"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Status}" Value="В процес">
                    <Setter Property="Background" Value="{StaticResource SoftBlueBrush}"/>
                    <Setter Property="BorderBrush" Value="#CFE6FB"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Status}" Value="Приключен">
                    <Setter Property="Background" Value="{StaticResource SoftGreenBrush}"/>
                    <Setter Property="BorderBrush" Value="#BFECD2"/>
                </DataTrigger>
                <!-- Optional: if you have a status like "За дизайнер" -->
                <DataTrigger Binding="{Binding Status}" Value="За дизайнер">
                    <Setter Property="Background" Value="{StaticResource SoftPurpleBrush}"/>
                    <Setter Property="BorderBrush" Value="#E1C8F3"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="StatusPillText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Status}" Value="Очаква">
                    <Setter Property="Foreground" Value="#B45309"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Status}" Value="В процес">
                    <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Status}" Value="Приключен">
                    <Setter Property="Foreground" Value="#15803D"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Status}" Value="За дизайнер">
                    <Setter Property="Foreground" Value="{StaticResource PurpleBrush}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

    </Window.Resources>

    <Grid Margin="20">
        <Border Style="{StaticResource CardContainer}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header like your screenshot -->
                <StackPanel Grid.Row="0">
                    <TextBlock Style="{StaticResource TitleText}" Text="Заявки (Tech Support)"/>
                    <TextBlock Style="{StaticResource SubText}"
                               Margin="0,6,0,0"
                               Text="Десен клик: смяна на статус | Двоен клик: коментар | Deploy: автоматично"/>
                </StackPanel>

                <!-- Top buttons row (blue primary + gray secondary) -->
                <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,14,0,14">
                    <Button Style="{StaticResource BtnPrimary}"
                            Width="180"
                            Content="↻ Обнови"
                            Click="Refresh_Click"/>

                    <Button Style="{StaticResource BtnNeutral}"
                            Width="160"
                            Margin="10,0,0,0"
                            Content="Затвори"
                            Click="Refresh_Click"/>
                    <!-- (If you have a Close handler, replace Click above with Close_Click) -->

                    <!-- Right side: search -->
                    <DockPanel Margin="18,0,0,0" LastChildFill="True" VerticalAlignment="Center">
                        <TextBlock Text="🔎" FontSize="14" Foreground="{StaticResource MutedBrush}" Margin="0,0,8,0" VerticalAlignment="Center"/>
                        <TextBox x:Name="SearchBox"
                                 Style="{StaticResource Field}"
                                 Width="360"
                                 Text="Търси по клиент / домейн / проблем..."
                                 VerticalContentAlignment="Center"/>
                    </DockPanel>
                </StackPanel>

                <!-- Grid -->
                <Border Grid.Row="2"
                        CornerRadius="12"
                        BorderBrush="{StaticResource LineBrush}"
                        BorderThickness="1"
                        Background="White"
                        Padding="0">
                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                        <DataGrid x:Name="IssuesList"
                                  Style="{StaticResource GridBase}"
                                  ColumnHeaderStyle="{StaticResource GridHeader}"
                                  RowStyle="{StaticResource GridRow}"
                                  CellStyle="{StaticResource GridCell}"
                                  MinWidth="1050">

                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Проблем / Задача" Binding="{Binding Issue}" Width="240"/>
                                <DataGridTextColumn Header="Отговорник" Binding="{Binding AssignedTo}" Width="150"/>

                                <!-- Status as pill -->
                                <DataGridTemplateColumn Header="Статус" Width="160">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Border Style="{StaticResource StatusPillBorder}" HorizontalAlignment="Left">
                                                <TextBlock Text="{Binding Status}" Style="{StaticResource StatusPillText}"/>
                                            </Border>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTextColumn Header="Приоритет" Binding="{Binding Priority}" Width="120">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock" BasedOn="{StaticResource PriorityText}"/>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>

                                <DataGridTextColumn Header="Категория" Binding="{Binding Category}" Width="140"/>
                                <DataGridTextColumn Header="Клиент" Binding="{Binding ClientName}" Width="160"/>
                                <DataGridTextColumn Header="Домейн" Binding="{Binding WebsiteDomain}" Width="220"/>
                                <DataGridTextColumn Header="Браузър" Binding="{Binding BrowserInfo}" Width="150"/>
                                <DataGridTextColumn Header="ОС" Binding="{Binding OS}" Width="120"/>
                                <DataGridTextColumn Header="Дата" Binding="{Binding CreatedDate}" Width="130"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </ScrollViewer>
                </Border>

                <!-- Bottom actions (same colors language as your app) -->
                <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,14,0,0">
                    <Button Style="{StaticResource BtnGreen}" Width="140" Margin="6,0"
                            Content="➕ Добави" Click="AddIssue_Click"/>
                    <Button Style="{StaticResource BtnPrimary}" Width="170" Margin="6,0"
                            Content="✏️ Промени статус" Click="ChangeStatus_Click"/>
                    <Button Style="{StaticResource BtnPurple}" Width="210" Margin="6,0"
                            Content="✔️ Маркирай като завършен" Click="MarkCompleted_Click"/>
                    <Button Style="{StaticResource BtnAmber}" Width="140" Margin="6,0"
                            Content="↻ Обнови" Click="Refresh_Click"/>
                </StackPanel>

            </Grid>
        </Border>
    </Grid>
</Window>
